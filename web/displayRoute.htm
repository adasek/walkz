<html>
<head>
	<title>Simple OSM GPX Track</title>
 <link rel="stylesheet" src="ol.css">
 <script src="ol-debug.js"></script>
 
	<script type="text/javascript">
		     
function init(){

  var projection = ol.proj.get('EPSG:900913');
  
  var projExtent = projection.getExtent();
  var startResolution = ol.extent.getWidth(projExtent) / 256;
  var resolutions = new Array(22);
  for (var i = 0, ii = resolutions.length; i < ii; ++i) {
    resolutions[i] = startResolution / Math.pow(2, i);
  }
  
  /*
  var tileGrid = new ol.tilegrid.TileGrid({
    extent: [14.27, 49.88, 14.63, 50.17],
    resolutions: resolutions,
    tileSize: [512, 256]
  });
  */
           
     var tl=ol.proj.transform([14.224090, 49.941601], 'EPSG:4326', 'EPSG:900913');  
     var br=ol.proj.transform([14.706750, 50.177650], 'EPSG:4326', 'EPSG:900913');
     
  var raster = new ol.layer.Tile({
      source: new ol.source.OSM({
        url: "http://adasek.cz/osm/tiles/{z}/{x}/{y}.png",
        params: {}, 
        crossOrigin: null
      })
  });
  
  
          // Add the GPX Tracks
			walks=new Array([],[],[],[],[]);
			walks[0].file="test_gpx/20150621-223525.gpx";
			walks[0].name="Walk1";                     
			walks[0].color="#880000";     
			walks[1].file="test_gpx/20150622-132906.gpx";
			walks[1].name="Walk2";                
			walks[1].color="#886600";      
			walks[2].file="test_gpx/20150623-144336.gpx";
			walks[2].name="Walk4";               
			walks[2].color="#660088";       
			walks[3].file="test_gpx/20150623-163221.gpx";
			walks[3].name="Walk5";               
			walks[3].color="#000088";      
			walks[4].file="test_gpx/20150629-221247.gpx";
			walks[4].name="Walk6";               
			walks[4].color="#008800";    
			
			var layersArray=new Array(raster);
			
		  for(i=0;i<walks.length;i++){
        var vector = new ol.layer.Vector({
          source: new ol.source.Vector({
            url: walks[i].file,
            format: new ol.format.GPX()
          }),
          style: new ol.style.Style({
            stroke: new ol.style.Stroke({
              color: walks[i].color,
              width: 3})
              })
        });
        layersArray[layersArray.length]=vector; //add this path as one layer
			}
 
  
  var map = new ol.Map({
    layers: layersArray,
    target: document.getElementById('map'),
    view: new ol.View({
      center: ol.proj.transform([14.32301,50.09083], 'EPSG:4326', 'EPSG:3857'),
      extent: [tl[0], tl[1], br[0], br[1]],
      zoom:15,
      minZoom:12,
      maxZoom:19
    })
  });
      
}   
    
    
    
	</script>
 
</head>
<body onload="init();">
	<div style="width:90%; height:90%" id="map"></div>
</body>
</html>